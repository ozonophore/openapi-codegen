# previewChanges

## Реализовано:

✅ Команда `preview-changes` реализована как отдельная команда CLI.

## Функциональность:

1. ✅ Проверка директории со сгенерированным кодом (по умолчанию `generated`)
   - Опция: `-gd, --generated-dir <value>`
   - Если директория пуста или не существует, выводится сообщение через APP_LOGGER и выполнение завершается

2. ✅ Создание временной директории для preview (по умолчанию `generated-preview`)
   - Опция: `-pd, --preview-dir <value>`
   - Директория создается автоматически

3. ✅ Обновление путей output в конфигурации
   - Пути `output`, `outputCore`, `outputServices`, `outputModels`, `outputSchemas` обновляются для генерации в preview директорию
   - Поддерживаются как конфигурации с `items` (multi-options), так и с `input/output` в корне (single-options)

4. ✅ Генерация кода в preview директорию
   - Используется та же логика, что и в команде `generate`
   - Поддерживается загрузка конфигурации из файла (опция `-ocn, --openapi-config`)

5. ✅ Сравнение файлов из старой и новой директорий
   - Рекурсивное чтение всех файлов из обеих директорий
   - Определение статусов: `added`, `modified`, `removed`
   - Использование библиотеки `diff` для сравнения содержимого файлов

6. ✅ Сохранение результатов в diff директорию (по умолчанию `generated-diff`)
   - Опция: `-dd, --diff-dir <value>`
   - Для каждого измененного файла создается файл `.diff` с результатами сравнения
   - Если файл без изменений, выводится сообщение через APP_LOGGER

7. ✅ Логирование результатов
   - Использование APP_LOGGER для всех сообщений
   - Вывод информации о количестве изменений и пути к diff файлам

## Использование:

```bash
# С параметрами по умолчанию
openapi-codegen-cli preview-changes

# С указанием директорий
openapi-codegen-cli preview-changes \
  --generated-dir ./my-generated \
  --preview-dir ./my-preview \
  --diff-dir ./my-diff

# С указанием конфигурационного файла
openapi-codegen-cli preview-changes --openapi-config ./custom-config.json
```

## Технические детали:

- Используется библиотека `diff` для сравнения файлов построчно
- Рекурсивное чтение директорий реализовано через вспомогательную функцию `readDirectoryRecursive`
- Поддержка миграции конфигурационных файлов через систему версионирования
- Обработка ошибок с корректным завершением процесса