# Превью изменений по итогам генерации

## Логика работы

- Загружаем конфигурационный файл `openapi.config.json`
- Если файле нет, то выводим ошибку
- Расчитываем путь до outputPath через `resolveHelper`
- Проверяем если там файлы, если нет, то выводим ошибку
- Формируем outputDirName через `basename` от папки генерации
- Формируем вспомогательные пути:
    - директория для хранения данных о различиях
    - директория отчетов об изменениях
    - путь до файла с перечислением добавленных файлов
    - путь до файла с перечислением удаленных файлов
    - путь до файла с перечислением измененных файлов
    - путь до файла с Summary отчетом об изменениях
    - директория для генерации новых файлов
- Очистка папки для записи новой генерации от старых результатов, если они есть
- Создаем директорию для записи новой генерации
- Преобразуем данные конфигурационного файла перед генерацией - `convertArrayToObject`
- Преобразуем пути `output*` уданных конфигурации
- Преобразование путей:
    - нормализуем путь до outputPath
    - нормализуем путь до output
    - если output начинается с outputPath, то меняем на новый. иначе соединяем новую директорию с basename
- записываем получившийся конфиг в файл
- запускаем енерацию по новому конфигурационному файлу
- получаем список всех файлов в generated папках: существующая генерация и новая
- создаем переменные для подсчета:
    - удаленных
    - измененных
    - добавленных
- через Set коллекцию проверяем наличие одних файлов среди других для определения:
    - добавленных: если в новых нет старых, то считаем их количество и собираем пути
    - удаленные: если среди старых нет новых, то считаем их количество и собираем пути
    - измененные: если и там и там, считываем содержимое файлов и сравниваем
    - Если есть изменения ( added or removed), то записываем разницу и увеличиваем счетчик
- Если счётчики пустые (0), то удаляем папку и выводим сообщение
- Иначе сообщаем, что были найдены изменения
- Формируем общий файл отчёта
- Записываем на диск 