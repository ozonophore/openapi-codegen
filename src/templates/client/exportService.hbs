{{>header}}

{{#if imports}}
{{#each imports}}
import type { {{{name}}}{{#if alias}} as {{{alias}}}{{/if}} } from '{{{joinPath @root.outputModels path}}}';
{{/each}}
{{/if}}
{{#if @root.useCancelableRequest}}
import type { CancelablePromise } from '{{{joinPath @root.outputCore 'CancelablePromise'}}}';
{{/if}}
import type { RequestExecutor, RequestConfig } from '{{{joinPath @root.outputCore './executor/requestExecutor'}}}';

{{#each operations}}
const {{{name}}} = ({{>parameters}}): RequestConfig => ({
    {{>serviceOption}}
});

{{/each}}

export type T{{{originName}}}Options = {
{{#each operations}}
    {{{name}}}: ({{>parametersDefinition}}) => RequestConfig;
{{/each}}
};

export const {{{originName}}}Options: T{{{originName}}}Options = {
{{#each operations}}
    {{{name}}}: {{{name}}},
{{/each}}
};

export class {{{name}}}<TOptions = unknown> {
    constructor(private readonly executor: RequestExecutor<TOptions>) {}

    {{#each operations}}
    /**
    {{#if deprecated}}
     * @deprecated
    {{/if}}
    {{#if summary}}
     * {{{summary}}}
    {{/if}}
    {{#if description}}
     * {{{description}}}
    {{/if}}
    {{#unless @root.useOptions}}
    {{#if parameters}}
    {{#each parameters}}
     * @param {{{name}}} {{{description}}}
    {{/each}}
    {{/if}}
    {{/unless}}
    {{#each results}}
     * @returns {{{type}}} {{{description}}}
    {{/each}}
     * @throws ApiError
     */
    {{#if @root.useCancelableRequest}}
    public {{{name}}}(
        {{>parameters}}
        options?: TOptions,
    ): CancelablePromise<{{>result default="void"}}> {
    {{else}}
    public {{{name}}}(
        {{>parameters}}
        options?: TOptions,
    ): Promise<{{>result default="void"}}> {
    {{/if}}
        return this.executor.request<{{>result default="void"}}>(
            {{{../originName}}}Options.{{{name}}}({{>parameterValues~}}),
            options
        );
    }
    {{/each}}
}
